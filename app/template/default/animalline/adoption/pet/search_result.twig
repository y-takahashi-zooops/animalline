{% set site_type = 'adoption' %}
{% extends 'animalline/adoption/frame.twig' %}
{% set params = app.request.query.all %}
{% block main %}
    <div class="section-search">
        <div class="main">
            {% if petKind == constant('Customize\\Config\\AnilineConf::ANILINE_PET_KIND_DOG') %}
                <nav class="nav nav-pills search-nav m-2 d-none d-flex">
                    <a class="nav-item nav-link active bg-adoption col-md-3"
                    href="{{ url('adoption_top', {'pet_kind': constant('Customize\\Config\\AnilineConf::ANILINE_PET_KIND_DOG')}) }}">
                        <h2 class="text-white text-align-center">犬を探す</h2>
                    </a>
                    <a class="nav-item nav-link border bg-white col-md-3"
                    href="{{ url('adoption_top', {'pet_kind': constant('Customize\\Config\\AnilineConf::ANILINE_PET_KIND_CAT')}) }}">
                        <h2 class="color-gray-300 text-align-center">猫を探す</h2>
                    </a>
                </nav>
            {% else %}
                <nav class="nav nav-pills search-nav m-2 d-none d-flex">
                    <a class="nav-item nav-link border bg-white col-md-3"
                    href="{{ url('adoption_top', {'pet_kind': constant('Customize\\Config\\AnilineConf::ANILINE_PET_KIND_DOG')}) }}">
                        <h2 class="color-gray-300 text-align-center">犬を探す</h2>
                    </a>
                    <a class="nav-item nav-link active bg-adoption col-md-3"
                    href="{{ url('adoption_top', {'pet_kind': constant('Customize\\Config\\AnilineConf::ANILINE_PET_KIND_CAT')}) }}">
                        <h2 class="text-white text-align-center">猫を探す</h2>
                    </a>
                </nav>
            {% endif %}
            <div class="m-2 p-2"></div>
            <form action="{{ url('adoption_pet_search_result') }}" method="get">
                <input type="hidden" name="pet_kind" value="{{ petKind }}">
                <div class="row">
                    <div class="col-md-5 select-container mb-2 mb-sm-none">
                        <select class="form_dropdown w-100" id="formControlSelect1" name="breed_type">
                            <option value="">種類</option>
                            {% for breed in breeds %}
                                <option value="{{ breed.id }}" {% if params.breed_type is defined and params.breed_type== breed.id
                                        %} selected {% endif %}>{{ breed.breedsName }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-3 select-container mb-2 mb-sm-none">
                        <select class="form_dropdown w-100" id="formControlSelect2" name="gender">
                            <option value="">性別</option>
                            <option value="1" {% if params.gender is defined and params.gender == 1
                            %} selected {% endif %}>男の子</option>
                            <option value="2" {% if params.gender is defined and params.gender == 2
                            %} selected {% endif %}>女の子</option>
                        </select>
                    </div>
                    <div class="col-md-3 select-container">
                        <select class="form_dropdown w-100" id="formControlSelect3" name="region">
                                <option value="">都道府県</option>
                                {% for region in regions %}
                                    <option value="{{ region.id }}" {% if params.region is defined and params.region == region.id
                                    %} selected {% endif %}>{{ region.name }}</option>
                                {% endfor %}
                            </select>
                        <input type="checkbox" name="adjacent" value="1" {% if params.adjacent is defined and params.adjacent == 1
                        %} checked {% endif %}> 隣接する都道府県も検索
                    </div>
                </div>
                <div class="row">
                    <div style="margin: 0 auto;">
                        <a href="#">
                            <button class="search_button bg-accent mt-3">検索する</button>
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    {# <div class="bg-primary"> #}
    <div>
        <div class="m-2 p-2"></div>
        <div class="row">
            {% include 'side.twig' %}
            <div class="main-container col-sm-9">
                <h2>検索結果</h2>
                <div class="m-3 p-3"></div>

                <div class="row">
                    {% for pet in pets %}
                        <div class="card col-sm-6 col-md-3 border-0 bg-none mb-4">
                            <div class="catalog-card">
                                <a href="{{ url('adoption_pet_detail', {'id': pet.id}) }}">
                                    <img src="{{ app.request.schemeAndHttpHost ~ '/' ~ constant('Customize\\Config\\AnilineConf::ANILINE_IMAGE_URL_BASE') ~ (pet.thumbnailPath | default('/noimage_plugin_list.png')) }}"
                                         class="card-img-top" alt="Pet-image">
                                </a>
                                <div class="card-body bg-white">
                                    <h3 class="color-gray-500 font-weight-600">{{ pet.getBreedsType().getBreedsName() ?? '' }}</h3>
                                    <div class="m-4"></div>
                                    <div class="d-flex">
                                        <h4 class="mr-2">{{ pet.petBirthday|date('Y年m月d日') }}生</h4>
                                        <h4>{{ pet.petSex == constant('Customize\\Config\\AnilineConf::ANILINE_PET_SEX_MALE') ? '男の子' : '女の子' }}</h4>
                                    </div>
                                    <div class="mb-2"></div>
                                    <div class="d-flex">
                                        {% set conservationHouse = pet.Conservation.getConservationHouseByPetType(pet.petKind) %}
                                        <h4 class="mr-3">{{ conservationHouse.conservationHouseCity ~ ' ' ~ conservationHouse.conservationHousePref ?? '' }}</h4>
                                        <h4>{{ pet.getCoatColor().getCoatColorName() ?? '' }}</h4>
                                    </div>
                                    <div class="m-2"></div>
                                    <h4>{{ pet.prComment }}</h4>
                                    <div class="m-2"></div>
                                    {# <h4>掲載日{{ pet.releaseDate|date('Y年m月d日') }}</h4> #}
                                    <div class="m-4"></div>
                                    <h3 class="color-gray-500 font-weight-600">{{ pet.price|number_format(0) }}<span>円（税込）</span>
                                    </h3>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        メッセージが見つかりません
                    {% endfor %}
                </div>
                <div class="m-2 p-2"></div>
                <div class="navigation">
                    {{ knp_pagination_render(pets) }}
                </div>
                <div class="m-2 p-2"></div>
            </div>
        </div>
    </div>
{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="{{ asset('assets/css/adoption-style.css') }}">
{% endblock %}

{% block javascript %}{% endblock %}