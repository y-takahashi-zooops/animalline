{% set site_type = 'breeder' %}
{% extends 'animalline/breeder/frame.twig' %}

{% block main %}
    <section id="breeder-column" class="breeder-column_dog">
        <div class="inner">
            <div class="breeder-column-row">
                <div class="breeder-column__main">
                    <div class="breeder-column__main_section" id="breeder-column__main_section_dog_new">
                        <div class="breeder-column__main_section_title">
                            <h2 class="float-left">
                                {{ breederPet.breedsType.breedsName ?? '' }}
                            </h2>
                            <div class="col-md-3 col-12 float-right btn-like mb-3 {{ isFavorite ? "red-heart" : "" }}" data-id="{{ breederPet.id }}" data-login="{{ isLoggedIn }}">
                                <a>
                                    <svg width="24" height="20" class="heart-icon">
                                        <path d="M19.469 1.262c-5.284-1.53-7.47 4.142-7.47 4.142S9.815-.269 4.532 1.262C-1.937 3.138.44 13.832 12 19.333c11.559-5.501 13.938-16.195 7.469-18.07z" stroke="#FF424F" stroke-width="1.5" fill="{{ isFavorite ? '#FF424F' : 'none' }}" fill-rule="evenodd" stroke-linejoin="round"></path>
                                    </svg>
                                    <span id="textBtnLike">
                                        {{ isFavorite ? 'お気に入りから削除' : 'お気に入りに追加' }}
                                    </span>
                                </a>
                            </div>
                        </div>
                        <div class="breeder-column__main_section_body">
                            <div class="row">
                                <div class="col-sm-6">
                                    <img src="{{ app.request.schemeAndHttpHost ~ '/' ~ constant('Customize\\Config\\AnilineConf::ANILINE_IMAGE_URL_BASE') ~ (images[0].imageUri | default | length > 0 ? images[0].imageUri : '/noimage_plugin_list.png') }}" class="card-img-top" alt="..." />
                                    <div class="d-block d-sm-none m-2 p-2"></div>
                                </div>
                                <div class="col-6 col-sm-3">
                                    <img src="{{ app.request.schemeAndHttpHost ~ '/' ~ constant('Customize\\Config\\AnilineConf::ANILINE_IMAGE_URL_BASE') ~ (images[1].imageUri | default | length > 0 ? images[1].imageUri : '/noimage_plugin_list.png') }}" class="card-img-top w-100" alt="..." />
                                    <div class="m-2 p-2"></div>
                                    <img src="{{ app.request.schemeAndHttpHost ~ '/' ~ constant('Customize\\Config\\AnilineConf::ANILINE_IMAGE_URL_BASE') ~ (images[2].imageUri | default | length > 0 ? images[2].imageUri : '/noimage_plugin_list.png') }}" class="card-img-top w-100" alt="..." />
                                </div>
                                <div class="col-6 col-sm-3">
                                    <img src="{{ app.request.schemeAndHttpHost ~ '/' ~ constant('Customize\\Config\\AnilineConf::ANILINE_IMAGE_URL_BASE') ~ (images[3].imageUri | default | length > 0 ? images[3].imageUri : '/noimage_plugin_list.png') }}" class="card-img-top w-100" alt="..." />
                                    <div class="m-2 p-2"></div>
                                    <img src="{{ app.request.schemeAndHttpHost ~ '/' ~ constant('Customize\\Config\\AnilineConf::ANILINE_IMAGE_URL_BASE') ~ (images[4].imageUri | default | length > 0 ? images[4].imageUri : '/noimage_plugin_list.png') }}" class="card-img-top w-100" alt="..." />
                                </div>
                            </div>
                            <div class="m-2 p-2"></div>
                            {% if video %}
                                <div class="row">
                                    <div class="col-12 text-center">
                                        <video controls autoplay loop preload="auto">
                                            <source type="video/mp4" src="{{ app.request.schemeAndHttpHost ~ '/' ~ video.imageUri }}"></video>
                                        </div>
                                    </div>
                                    <div class="m-2 p-2"></div>
                                {% endif %}
                                {# <div class="row"> #}
                                <div class="breeder_section_header">
                                    <i class="fas fa-paw"></i>
                                    基本情報
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 col-md-4 contents_col_bold">
                                            種類
                                        </div>
                                        <div class="col-12 col-md-8 contents_col_normal">
                                            {{ breederPet.breedsType.breedsName ?? '' }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 col-md-4 contents_col_bold">
                                            性別
                                        </div>
                                        <div class="col-12 col-md-8 contents_col_normal">
                                            {{ breederPet.petSex == constant('Customize\\Config\\AnilineConf::ANILINE_PET_SEX_MALE') ? '男の子' : '女の子' }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        {% set breederHouse = breederPet.Breeder.getBreederHouseByPetType(breederPet.petKind) %}
                                        <div class="col-12 col-md-4 contents_col_bold">
                                            見学地域
                                        </div>
                                        <div class="col-12 col-md-8 contents_col_normal">
                                            {{ breederHouse.breederHouseCity ~ ' ' ~ breederHouse.breederHousePref ?? '' }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 col-md-4 contents_col_bold">
                                            誕生日
                                        </div>
                                        <div class="col-12 col-md-8 contents_col_normal">
                                            {{ breederPet.petBirthday.format('Y年m月d日') ?? '' }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 col-md-4 contents_col_bold">
                                            毛色                                                          
                                        </div>
                                        <div class="col-12 col-md-8 contents_col_normal">
                                            {{ breederPet.coatColor.coatColorName ?? '' }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 col-md-4 contents_col_bold">
                                            血統書の有無                                                  
                                        </div>
                                        <div class="col-12 col-md-8 contents_col_normal">
                                        {% if breederPet.isPedigree == 1 %}
                                            {% if breederExamInfo == null %}
                                                無
                                            {% elseif breederExamInfo.pedigreeOrganization == 1 or breederExamInfo.pedigreeOrganization == 2 %}
                                                有（ {{ pedigree.pedigreeName ? pedigree.pedigreeName : '_' }} ）
                                            {% elseif breederExamInfo.pedigreeOrganization == 3 %}
                                                有（ {{ breederExamInfo.pedigreeOrganizationOther ? breederExamInfo.pedigreeOrganizationOther : '_' }} ）
                                            {% endif %}
                                        {% else %}
                                            無
                                        {% endif %}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 col-md-4 contents_col_bold">
                                            ワクチン代負担                                               
                                        </div>
                                        <div class="col-12 col-md-8 contents_col_normal">
                                            {% if breederPet.getIncludeVaccineFee == 0 %}
                                                代金に含まない（{{ breederPet.getVaccineDetail() ? breederPet.getVaccineDetail() : '_' }}）
                                            {% else %}
                                                代金に含む
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 col-md-4 contents_col_bold">
                                            成犬時予想体重
                                        </div>
                                        <div class="col-12 col-md-8 contents_col_normal">
                                            {{ breederPet.futureWait }}kg
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 contents_col_normal mt-4 mb-4 pl-4 pr-4" style="background:#f7f5f0; border:1px solid #dcdfe1; border-radius: 3px;">
                                    <h6 class="text-align-center mb-2" style="color:#399634">
                                        <i class="fas fa-info-circle"></i>
                                        【生後56日を過ぎていない子犬の引き渡しについて】
                                    </h6>
                                    動物愛護法により、生後56日を過ぎていない子犬の引き渡しが禁止されています。</br>
                                    この子犬はまだ生後56日を過ぎていませんので、すぐに引き渡しを行う事はできません。</br>
                                    生後56日を過ぎていなくてもブリーダーの下で親犬や兄弟犬と共に飼養されている環境であれば購入検討のためにご見学することは可能です。</br>
                                </div>
                                <div class="breeder_section_header">
                                    <i class="fas fa-paw"></i>
                                    PRコメント
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 contents_col_normal">
                                            {{ breederPet.prComment | nl2br }}
                                        </div>
                                    </div>
                                </div>
                                <div class="breeder_section_header">
                                    <i class="fas fa-paw"></i>
                                    金額 
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 contents_col_price">
                                            {{ breederPet.price|number_format(0) }}円（税込）
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 btn_center">
                                    <div class="row">
                                        <div class="col-12">
                                            <a href="{{ url('breeder_contact', {'pet_id': breederPet.id}) }}">
                                                <button class="btn basic-btn breeder-btn" style="height:65px;">
                                                    この子犬の見学希望／お問い合わせ(無料)                                                  
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-4 mt-4">
                                    <div class="breeder_section_header">
                                        {# <i class="fas fa-paw"></i> #}
                                        アニマルラインを通して子犬をご購入いただくと下記の特典が受けられます！
                                    </div>
                                    <table class="tbl_benefits">
                                        <tr>
                                            <th>1ヶ月間の<br>無料ペット保険</th>
                                            <td>
                                                アニマルラインを通じて子犬をご購入いただいた方に、<b>ペット保険大手アニコム損保の保険を1ヶ月間無料</b>でお付けいたします。(ブリーダーが提供する生体保証とは別の補償になります。)<br>
                                                ご利用には別途お申し込みが必要になります。<br>
                                                ※無料ペット保険の補償期間を過ぎた場合・子犬がお迎え時点で1歳を超えていた場合はお申し込みができません。<br>
                                                <a href="#">詳細はこちらをご覧ください。</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>充実のご成約特典</th>
                                            <td>
                                                アニマルラインを通じて子犬をご購入いただきますと、
                                                <b>子犬のためのフード2種</b>、
                                                <b>消臭剤（1,650円相当）</b>、
                                                <b>電話相談サービス</b>、
                                                <b>総額5,000円分のクーポン</b>、
                                                <b>乳酸菌ミルクサプリ</b>、
                                                <b>飼育本</b>、
                                                を無料でお付けいたします。サービスのご利用には別途お申し込みが必要になります。
                                                <br>
                                                <a href="#">詳細はこちらをご覧ください。</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>安心の取引保証</th>
                                            <td>
                                                みんなのブリーダーを通じて子犬をご購入いただき、子犬代金支払い後に子犬の引き渡しを受けられない詐欺行為があった場合は当サイトが<b>全額返金保証</b>いたします。
                                            </td>
                                        </tr>
                                    </table>
                                </div>

                                <div class="breeder_section_header_orange">
                                    <i class="fas fa-paw"></i>
                                    紹介文
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 contents_col_normal">
                                            {{ breederPet.description | nl2br }}
                                        </div>
                                    </div>
                                </div>
                                <div class="breeder_section_header_orange">
                                    <i class="fas fa-paw"></i>
                                    生体保障内容                                
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 contents_col_normal">
                                            {{ breederPet.getGuarantee() | nl2br }}
                                        </div>
                                    </div>
                                </div>
                                <div class="breeder_section_header_orange">
                                    <i class="fas fa-paw"></i>
                                    引き渡し方法
                                </div>
                                <div class="col-12 breeder_section_detail">
                                    <div class="row">
                                        <div class="col-12 contents_col_normal">
                                            {{ breederPet.getDeliveryWay() | nl2br }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 btn_center">
                                    <div class="row">
                                        <div class="col-12">
                                            <a href="{{ url('breeder_contact', {'pet_id': breederPet.id}) }}">
                                                <button class="btn basic-btn breeder-btn" style="height:65px;">
                                                    この子犬の見学希望／お問い合わせ(無料)                                                  
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 contents_col_normal mt-4 mb-4 pl-4 pr-4" style="background:#f7f5f0; border:1px solid #dcdfe1; border-radius: 3px;">
                                    当サイトではお客様に最も信頼されるブリーダー子犬 直販サイトを目指して、</br>
                                    子犬情報およびブリーダー情報の正確性向上に努めております。</br>
                                    当サイトに掲載されている情報で誤解を招く表現、事実と異なる表現などのお気づきの点がございましたら</br>
                                    事務局へのお問い合わせフォームよりご連絡をお願いいたします。</br>
                                </div>
                                <div class="m-2 p-2"></div>
                                <div class="breeder_section_header">
                                    <i class="fas fa-paw"></i>
                                    ブリーダー紹介    
                                </div>
                                <div class="m-2 p-2"></div>
                                <div class="row ml-2">
                                    <div class="breeder-img col-sm-4">
                                        <img alt="..." src="{{ breederPet.Breeder.thumbnailPath | default('/' ~ constant('Customize\\Config\\AnilineConf::ANILINE_IMAGE_URL_BASE') ~ '/noimage_plugin_list.png') }}" class="w-100 mb-4 mb-sm-0"></div>
                                        <div class="breeder-info col-sm-8">
                                            <h3 class="font-weight-500 color-gray-500 mb-4">
                                                {{ breederPet.Breeder.getLicenseHouseName() }}
                                            </h3>
                                            <div class="d-flex mb-2 rating">
                                                <h6>
                                                    総合評価                                          
                                                </h6>
                                                <div class = "stars-outer">
                                                    <div class = "stars-inner"></div>
                                                </div>
{#                                                    <div class="m-1 p-1"></div>#}
                                                    <h6 class = "number-rating">
                                                        {{ breederPet.Breeder.getBreederRank() }}
                                                    </h6>
                                                </div>
                                                <div class="d-flex mb-2">
                                                    <h6>
                                                        動物取扱業登録番号：                                             
                                                    </h6>
                                                    <h6>
                                                        {{ breederPet.Breeder.getLicenseNo() }}&emsp;
                                                    </h6>
                                                    <h6>
                                                        登録：                                                     
                                                    </h6>
                                                    <h6>
                                                        {{ breederPet.Breeder.getLicenseRegistDate()|date('Y/m/d') }}
                                                    </h6>
                                                </div>
                                                <div class="d-flex mb-2">
                                                    <h6>
                                                        有効期限：
                                                    </h6>
                                                    <h6>
                                                        {{ breederPet.Breeder.getLicenseExpireDate()|date('Y/m/d') }}&emsp;
                                                    </h6>
                                                    <h6>
                                                        動物取扱責任者：                                                
                                                    </h6>
                                                    <h6>
                                                        {{ breederPet.Breeder.getLicenseManagerName() }}
                                                    </h6>
                                                </div>
                                                <div class="d-flex mb-4">
                                                    <h6>
                                                        犬舎所在地：                                                   
                                                    </h6>
                                                    {% set breederHouseDog = breederPet.Breeder.getBreederHouseByPetType(constant('Customize\\Config\\AnilineConf::ANILINE_PET_KIND_DOG')) %}
                                                    {% set breederHouseCat = breederPet.Breeder.getBreederHouseByPetType(constant('Customize\\Config\\AnilineConf::ANILINE_PET_KIND_CAT')) %}
                                                    {% if (breederPet.Breeder.handlingPetKind == constant('Customize\\Config\\AnilineConf::ANILINE_PET_KIND_DOG_CAT')) %}
                                                        <h6>
                                                            {{ breederHouseDog.breederHousePref ~ breederHouseDog.breederHouseCity ?? '' ~ ' ' ~ breederHouseCat.breederHousePref ~ breederHouseCat.breederHouseCity ?? '' }}
                                                        </h6>
                                                    {% elseif (breederPet.Breeder.handlingPetKind == constant('Customize\\Config\\AnilineConf::ANILINE_PET_KIND_DOG')) %}
                                                        <h6>
                                                            {{ breederHouseDog.breederHousePref ~ breederHouseDog.breederHouseCity ?? '' }}
                                                        </h6>
                                                    {% else %}
                                                        <h6>
                                                            {{ breederHouseCat.breederHousePref ~ breederHouseCat.breederHouseCity ?? '' }}
                                                        </h6>
                                                    {% endif %}
                                                </div>
                                                <!--
                                                    <div class="d-flex">
                                                        <h6>犬舎見学：</h6>
                                                        {% set ex_status = ['審査前', '審査中', '審査OK', '審査NG'] %}
                                                        <h6>{{ ex_status[breederPet.Breeder.examinationStatus] }}</h6>
                                                    </div>
                                                -->
                                                <a href="{{ url('breeder_detail', {'breeder_id':breederPet.Breeder.id}) }}">
                                                    <h4 class="color-breeder">
                                                        ブリーダー詳細ページへ                                               
                                                    </h4>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="m-2 p-2"></div>
                                        {# <div class="row"> #}
                                        {# <div>
                                            <div class="breeder_section_header_orange">
                                                <i class="fas fa-paw"></i>
                                                PRコメント                                        
                                            </div>
                                            <div class="col-12 breeder_section_detail">
                                                <div class="row">
                                                    <div class="col-12 contents_col_normal">
                                                        {{ breederPet.Breeder.getPrText()| nl2br }}
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="breeder_section_header_orange">
                                                <i class="fas fa-paw"></i>
                                                動物愛護法改正への対応                                      
                                            </div>
                                            <div class="col-12 breeder_section_detail">
                                                <div class="row">
                                                    <div class="col-12 contents_col_normal">
                                                        {{ breederPet.Breeder.getRegalEffort()| nl2br }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div> #}
                                    </div>
                                </div>
                            </div>
                            {% include 'animalline/breeder/side.twig' %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
{% block stylesheet %}
    <link rel="stylesheet" href="{{ asset('assets/css/breeder-style.css') }}">
    <style>
        .stars-outer {
            position: relative;
            display: inline-block;
        }
        .stars-inner {
            position: absolute;
            top: 0;
            left: 0;
            white-space: nowrap;
            overflow: hidden;
            width: 0;
        }
        .stars-outer::before {
            content: "\f005 \f005 \f005 \f005 \f005";
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            color:#ccc;
        }
        .stars-inner::before {
            content: "\f005 \f005 \f005 \f005 \f005";
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            color:#f8ce0b;
        }
    </style>
{% endblock %}
{% block javascript %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="{{ asset('assets/js/breeder_favorite.js') }}"></script>
<script>
    const starTotal = 5;
    document.addEventListener('DOMContentLoaded', getRating());
    function getRating() {
        const starPercentage = ({{ breederPet.Breeder.getBreederRank() }} / starTotal) * 100;
        document.querySelector('.stars-inner').style.width = `${Math.round(starPercentage/10)*10}%`;
    }
</script>
<script>
    function toggleNav() {
        var body = document.body;
        var hamburger = document.getElementById('js-hamburger');
        var blackBg = document.getElementById('js-black-bg');

        hamburger.addEventListener('click', function() {
            body.classList.toggle('nav-open');
        });
        blackBg.addEventListener('click', function() {
            body.classList.remove('nav-open');
        });
    }
    toggleNav();
</script>
{% endblock %}