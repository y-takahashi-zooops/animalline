{% set site_type = 'breeder' %}
{% extends 'ani_frame.twig' %}

{% block main %}
<div class="main">
    <div class="row">
        <div class="main-container col-12">
            <h1>マイページ</h1>

            <div class="row">
                <div class="col-lg-4 col-md-12">
                    <a href="{{url('breeder_favorite')}}" class="btn btn-warning btn-block mt-3" role="button">お気に入り一覧</a>
                </div>
                <div class="col-lg-4 col-md-12">
                    <a href="{{url('breeder_all_message')}}" class="btn btn-warning btn-block mt-3" role="button">取引メッセージ</a>
                </div>
            </div>
            <div class="m-2 p-2"></div>
            <h3>ブリーダー登録申請</h3>
            <div class="row">
                <div class="col-lg-4 col-md-12">
                    <a href="{{url('breeder_examination')}}" class="btn btn-warning btn-block mt-3" role="button">ブリーダー申請を行う</a>
                </div>
            </div>
            <div class="m-4 p-4"></div>
            <div class="d-flex justify-content-between align-items-end">
                <h2>交渉中のお取引</h2>
            </div>
            <div class="m-1 p-1"></div>
            {% for rootMessage in rootMessages %}
                <div class="row">
                    <div class="col-12">
                        <div class="d-sm-flex justify-content-between py-3 border breeder-border rounded">
                            <div class="ml-5">
                                <h3>{{ rootMessage.Breeder.getBreederHouseByPetType(rootMessage.pet.petKind).breederHouseName ?? '' }}</h3>
                                <h3><a href={{ url('breeder_mypage_messages', {'contact_id': rootMessage.id}) }}>{{ rootMessage.contactTitle }}</a></h3>
                            </div>
                            <h4 class="mr-sm-5 ml-5">返信日時：{{ lastReplies[rootMessage.id].sendDate.format('Y年m月d日　H:i') ?? 'なし。' }}</h4>
                        </div>
                    </div>
                </div>
            {% else %}
                結果が０件です。
            {% endfor %}
        
            <div class="m-4 p-4"></div>
            <div class="d-flex justify-content-between align-items-end">
                <h2>お気に入り一覧</h2>
                <a class="d-flex" href="#">
                    <h3 class=" color-gray-300">もっと見る</h3>
                    <div class="m-1 p-1"></div>
                    <img src="{{ asset('assets/img/arrow-icon.svg') }}">
                </a>
            </div>
            <div class="m-1 p-1"></div>
            {% for pet in pets %}
                <div class="row">
                    <div class="card col-sm-6 col-md-3 border-0 bg-none mb-4">
                        <div class="catalog-card">
                            <a href="{{ url('breeder_pet_detail', {id: pet.id}) }}">
                                <img src="{{ app.request.schemeAndHttpHost ~ '/' ~ constant('Customize\\Config\\AnilineConf::ANILINE_IMAGE_URL_BASE') ~ (pet.thumbnailPath | default('/noimage_plugin_list.png')) }}"
                                        class="card-img-top" alt="...">
                            </a>
                            <div class="card-body bg-primary">
                                <h3 class="color-gray-500 font-weight-600">{{ pet.breedsType.breedsName ?? '' }}</h3>
                                <div class="m-4"></div>
                                <div class="d-flex">
                                    <h4 class="mr-2">{{ pet.petBirthday|date('Y年m月d日') }}生</h4>
                                    {% if(pet.petSex == constant('Customize\\Config\\AnilineConf::ANILINE_PET_SEX_MALE')) %}
                                        <h4 class="pet-set-male">男の子</h4>
                                    {% else %}
                                        <h4 class="pet-set-female">女の子</h4>
                                    {% endif %}
                                </div>
                                <div class="mb-2"></div>
                                <div class="d-flex">
                                    {% set breederHouse = pet.Breeder.getBreederHouseByPetType(pet.petKind) %}
									<h4 class="mr-3">{{ breederHouse.breederHouseCity ~ ' ' ~ breederHouse.breederHousePref ?? '' }}</h4>
                                    <h4>{{ pet.coatColor.coatColorName ?? '' }}</h4>
                                </div>
                                <div class="m-2"></div>
                                <h4>{{ pet.prComment }}</h4>
                                <div class="m-2"></div>
                                <h4>掲載日{{ pet.releaseDate|date('Y年m月d日') }}</h4>
                                <div class="m-4"></div>
                                <h3 class="color-gray-500 font-weight-600">{{ pet.price|number_format(0) }}<span>円（税込）</span></h3>
                            </div>
                        </div>
                    </div>
                </div>
            {% else %}
                結果が０件です。
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
{% block stylesheet %}
    <link rel="stylesheet" href="{{ asset('assets/css/breeder-style.css') }}">
{% endblock %}
{% block javascript %}{% endblock %}